<!DOCTYPE html>
<html lang="zh-cn" id="html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zhouzefu@126.com</title>
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
    <!-- 头部导航 -->
    <div class="nav_hader" id="nav_hader"></div>
    <!-- 状态提示 -->
    <div class="status_list" id="status_list"></div>
    <!-- 项目列表 -->
    <div class="project_list" id="project_list"></div>
    <!-- 网站信息 -->
    <div class="website_info"></div>
    <!-- 脚本 -->
    <script src="js/utils.js"></script>
</body>

<script>
	/**
	 * 页面加载时
	 * @param {Event} res
	 * @returns
	 */
	window.onload = res => initPageData(res);
	
	/**
	 * 初始化页面数据
	 * @param {Event} res
	 */
	function initPageData(res) {
		initNavHaderHtml();
		initStatusTipHtml();
		initProjectListHtml();
	}
	
	/**
	 * 初始化项目提示
	 */
	function initStatusTipHtml() {
		for (const key in project_status) {
			// 提示Item
			const tipItemEl = window.document.createElement('div');
			tipItemEl.classList = 'item';
			// 标志
			const stateEl = window.document.createElement('div');
			stateEl.classList = `status status_${project_status[key].state}`;
			tipItemEl.appendChild(stateEl);
			// 提示文本
			const titleEl = window.document.createElement('div');
			titleEl.classList = 'title';
			titleEl.innerHTML = project_status[key].title;
			tipItemEl.appendChild(titleEl);
			// 加入列表
			$('status_list').appendChild(tipItemEl);
		}
	}
	
	/**
	 * 初始化项目列表HTML
	 */
	function initProjectListHtml() {
		buildProjectListHtml(projects);
	}
	/**
	 * 构建头部导航HTML
	 */
	function initNavHaderHtml() {
		// 邮箱
		const emailEl = window.document.createElement('div');
		emailEl.classList = 'email';
		emailEl.innerHTML = `泽富姓周（${my_email}）`;
		emailEl.onclick = res => sendEmail(my_email,'来自GitHub/Blog站点的小伙伴','你好~');
		// 时间
		const timeEl = window.document.createElement('div');
		timeEl.classList = 'date_time';
		timeEl.innerHTML = '--:--:--';
		setInterval(() => timeEl.innerHTML = new Date().toLocaleString(), 1000);
		// 装载
		const navHeaderEl = $('nav_hader')
		navHeaderEl.appendChild(emailEl);
		navHeaderEl.appendChild(timeEl);
	}
	/**
	 * 发送邮件
	 * @param {string} to
	 * @param {string} subject
	 * @param {string} body
	 */
	function sendEmail(to,subject,body){
		window.open(`mailto:${to}?subject=${encodeURIComponent(subject)}&body=${body}`,'_blank');
	}
	/**
	 * 改变项目排序状态
	 * @param {number} status
	 */
	function changeProjectStatus(status) {
		let list = [];
		projects.forEach(item => item.status === status ? list.unshift(item) : list.push(item));
		return list;
	}
	/**
	 * 复制数据
	 * @param {*} data
	 * @returns
	 */
	function copy(data) {
		return JSON.parse(JSON.stringify(data));
	}
	/**
	 * 构建项目列表
	 */
	function buildProjectListHtml(projects) {
		projects.forEach((item, index) => {
			// 项目
			const projectItem = window.document.createElement('div');
			projectItem.classList = 'item';
			projectItem.onclick = res => onClickProject(item, index);
			// TOP
			const topEl = window.document.createElement('div');
			topEl.classList = 'top';
			// 状态
			const statusEl = window.document.createElement('div');
			statusEl.classList = `status status_${item.status.state}`;
			// 标题
			const titleEl = window.document.createElement('div');
			titleEl.classList = 'title';
			titleEl.innerHTML = item.title;
			// 简介
			const remarkEl = window.document.createElement('div');
			remarkEl.classList = 'remark';
			remarkEl.innerHTML = item.remark;
			// 装载
			topEl.appendChild(statusEl);
			topEl.appendChild(titleEl);
			projectItem.appendChild(topEl);
			projectItem.appendChild(remarkEl);
			$('project_list').appendChild(projectItem);
		});
	}
	/**
	 * 项目点击事件
	 * @param {{}} item
	 * @param {number} index
	 */
	function onClickProject(item, index) {
		if (item.status.state === project_status.running.state) toPage(item.url);
		else showToast(item.status.title);
	}
	
	
	/**
	 * 更新时间
	 */
	function updateDateTime() {
		setInterval(() => $('date_time').innerHTML = new Date().toLocaleString(), 1000);
	}
	
</script>

</html>
